version: 1
applications:
  - appRoot: .
    frontend:
      phases:
        preBuild:
          commands:
            - apt-get update -y
            - apt-get install -y --no-install-recommends libgomp1  # Required for Streamlit
        build:
          commands:
            - docker build -t streamlit-app .
            - docker run -d -p 8080:8080 streamlit-app  # Test container startup
      artifacts:
        baseDirectory: /
        files: '**/*'
    environment:
      variables:
        STREAMLIT_SERVER_PORT: "8080"
        STREAMLIT_SERVER_HEADLESS: "true"